from shapely.geometry import Point, Polygon
from shapely.ops import unary_union

def trace_polygon_circle_intersection(polygon_coords, circle_center, circle_radius):
    # Create a polygon object from the given coordinates
    polygon = Polygon(polygon_coords)

    if polygon.is_empty:  # Check if the polygon is empty
        polygon = Point(0, 0)  # Replace with a Point object at (0, 0)

    # Create a circle object from the given center and radius
    circle = Point(circle_center).buffer(circle_radius)

    # Find the intersection between the polygon and the circle
    intersection = polygon.intersection(circle)

    if intersection.is_empty:  # Check if the intersection is empty
        return []
    elif intersection.geom_type == 'Point':  # Check if the intersection is a single point
        return [(intersection.x, intersection.y)]
    else:
        # If the intersection is a collection of polygons, find their union
        intersection_region = unary_union(intersection)

        if intersection_region.geom_type == 'Polygon':
            # Convert the polygon into a list of coordinate tuples
            intersection_region = [coord for coord in intersection_region.exterior.coords]

    return intersection_region

polyCords = [(48.233748664466376, 55.2343044384316), (47.68054000400378, 51.5048745836597), (46.7644471450242, 47.84762688389948), (45.494292562546896, 44.29778263375459), (43.88230853953825, 40.8895287738962), (41.944019363339926, 37.65568865213582), (39.99867967992038, 35.03270173033289), (37.12021745395286, 36.75798559305255), (33.87408552930016, 39.16548110824231), (30.879560442877928, 41.879560442877924), (28.165481108242314, 44.87408552930016), (25.757985593052553, 48.12021745395285), (23.680259395190852, 51.58669419188536), (21.952312153743264, 55.24013167714248), (20.590784945237004, 59.04534530956909), (19.608790020976457, 62.965688801743546), (19.01578452889528, 66.96340710275848), (18.817479436051997, 71.0), (19.015784528895274, 75.0365928972415), (19.608790020976457, 79.03431119825645), (20.590784945236997, 82.9546546904309), (21.952312153743264, 86.75986832285751), (23.680259395190845, 90.41330580811463), (25.757985593052545, 93.87978254604714)]

intersection = trace_polygon_circle_intersection(polyCords, (50, 50), 10)

# Testing the function
polygon_coords = [(48.233748664466376, 55.2343044384316), (47.68054000400378, 51.5048745836597), (46.7644471450242, 47.84762688389948), (45.494292562546896, 44.29778263375459), (43.88230853953825, 40.8895287738962), (41.944019363339926, 37.65568865213582), (39.99867967992038, 35.03270173033289), (37.12021745395286, 36.75798559305255), (33.87408552930016, 39.16548110824231), (30.879560442877928, 41.879560442877924), (28.165481108242314, 44.87408552930016), (25.757985593052553, 48.12021745395285), (23.680259395190852, 51.58669419188536), (21.952312153743264, 55.24013167714248), (20.590784945237004, 59.04534530956909), (19.608790020976457, 62.965688801743546), (19.01578452889528, 66.96340710275848), (18.817479436051997, 71.0), (19.015784528895274, 75.0365928972415), (19.608790020976457, 79.03431119825645), (20.590784945236997, 82.9546546904309), (21.952312153743264, 86.75986832285751), (23.680259395190845, 90.41330580811463), (25.757985593052545, 93.87978254604714), (25.821219702891483, 93.96504387317322), (28.110471226103794, 92.88230853953826), (31.344311347864167, 90.94401936333993), (34.372594083357185, 88.69809181829537), (37.166155414412245, 86.16615541441226), (39.69809181829535, 83.3725940833572), (41.944019363339926, 80.34431134786418), (43.882308539538236, 77.11047122610381), (45.49429256254689, 73.70221736624542), (46.7644471450242, 70.15237311610052), (47.68054000400378, 66.49512541634031), (48.233748664466376, 62.76569556156839), (48.41874542459709, 59.0)]
circle5_center = (75, 20)
circle5_radius = 38.07886552931954

intersection_coords = trace_polygon_circle_intersection(polygon_coords, circle5_center, circle5_radius)
print("Polygon-Circle Intersection Coordinates:", intersection_coords)
